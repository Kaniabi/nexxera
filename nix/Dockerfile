# This file is generated by zops.anatomy.

FROM kaniabi/pythonbase:latest

RUN \
  apt-get install -y --no-install-recommends build-essential && \
  
# APP REQUIREMENTS: python
#   NOTE: Separate requirements from the project code itself to optimize docker creation for optimization.
ADD ./nix/requirements /etc/requirements
RUN pip install -r /etc/requirements/production.txt


# APP SOURCE
ADD . /src
RUN rm -rf /app  && \
    ln -s /src/nix /app
WORKDIR /app

# APP EXECUTION
EXPOSE 80
ADD ./srv /srv
ENTRYPOINT ["/srv/docker-entrypoint.sh"]

# APP INSTALL
RUN pip install --no-dependencies -e /src/nix
